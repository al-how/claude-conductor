services:
  claude-conductor:
    image: ghcr.io/al-how/claude-conductor:latest
    container_name: claude-conductor
    restart: unless-stopped
    volumes:
      # Mount your Obsidian vault here
      - ./vault:/vault
      # Mount your configuration file
      # If you have a config directory:
      # - ./config:/config
      # If you have a single config file:
      - ./config.local.yaml:/config/config.yaml
      # Mount data directory for logs and DB
      - ./data:/data
      # Mount .claude directory for credentials and memory
      - ./.claude:/home/claude/.claude
    environment:
      # Required for API execution mode (execution_mode: 'api' cron jobs)
      # Reference this in config.yaml as: anthropic_api_key: "${ANTHROPIC_API_KEY}"
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      # Required for Telegram bot
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN:-}
      # Set to "true" to enable noVNC for browser login management
      - BROWSER_ENABLED=${BROWSER_ENABLED:-false}
      # GitHub token for gh CLI â€” allows Claude to create issues, PRs, etc.
      # Requires repo scope (or public_repo for public repos only)
      - GH_TOKEN=${GH_TOKEN:-}
    ports:
      - "3000:3000"
      - "6080:6080"   # noVNC for browser login management
    # Network mode host might be needed for some use cases
    # network_mode: host
